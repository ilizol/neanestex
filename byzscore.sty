\ProvidesPackage{byzscore}

\RequirePackage{xcolor}
\RequirePackage{luacode}
\RequirePackage{luacolor}
\RequirePackage{fontspec}

\newfontfamily\byzneumefont{Neanes.otf}
\newfontfamily\byzlyricfont{SourceSerif4-Regular.otf}
\newfontfamily\byzdropcapfont{PFGoudyInitials.ttf}
%\newfontfamily\byzdropcapfont{Bahnschrift}
%\newfontfamily\byzdropcapfont{Vilnius}

\begin{luacode*}
    dofile("byzscore.lua")
\end{luacode*}

% Font sizes
\newlength{\byzneumesize}
\setlength{\byzneumesize}{20bp}

\newlength{\byzlyricsize}
\setlength{\byzlyricsize}{12bp}

% Colors
\def\byzcoloraccidental{ED0000}
\def\byzcolordropcap{ED0000}
\def\byzcolorfthora{ED0000}
\def\byzcolorgorgon{ED0000}
\def\byzcolorheteron{ED0000}
\def\byzcolorison{ED0000}
\def\byzcolorkoronis{ED0000}
\def\byzcolorlyrics{000000}
\def\byzcolormartyria{ED0000}
\def\byzcolormeasurebar{ED0000}
\def\byzcolormeasurenumber{000000}
\def\byzcolormodekey{ED0000}
\def\byzcolorneume{000000}
\def\byzcolornoteindicator{ED0000}
\def\byzcolortempo{ED0000}

% \byzneume
% #1 optional color
% #2 required hex unicode value
% Example usage:
% \byzneume[E000] prints an ison in the default color and size
\newcommand{\byzneume}[2][000000]{%
\textcolor[HTML]{#1}{%
\fontsize{\byzneumesize}{\baselineskip}%
\byzneumefont%
\char"#2}%
}

% Command to draw a full score at the macro insertion point
\newcommand{\byzscore}[1]{%
    \directlua{parse_notes("#1")}
}
